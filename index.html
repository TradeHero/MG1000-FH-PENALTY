<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="apple-itunes-app" content="app-id=859894802"/>
    <title></title>
    <link href="css/reset.css" rel="stylesheet"/>
    <link href="css/main.css" rel="stylesheet"/>
    <script type="application/javascript"
            src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!--<script src="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.3/jquery.mobile.min.js"></script>-->
    <script type="application/javascript" src="src/lib/thcanvas-v0.1.0.min.js"></script>
    <script type="application/javascript" src="src/main.js"></script>
    <script type="application/javascript" src="src/util/input.js"></script>
    <script type="application/javascript" src="src/ui/base.js"></script>
    <script type="application/javascript" src="src/ui/view.js"></script>
    <script type="application/javascript" src="src/ui/control.js"></script>
</head>
<body>
    <img src="assets/fh-logo.svg" id="logo" style="width: 800px "/>
    <p id="content">Earn more points for Ryne Cheow!</p>

    <script>
        function statusChangeCallback(response) {
            var uri = encodeURI('http://192.168.1.82:8000');

            if (response.status === 'connected') {
                // redirect user to mini game.
                window.location.href = uri + "&access_token=" + response["authResponse"]["accessToken"]
            } else if (response.status === 'not_authorized') {
                // The person is logged into Facebook, but not your app.
                window.location = encodeURI("https://www.facebook.com/dialog/oauth?client_id=772954419408981&redirect_uri=" + uri + "&scope=email,user_birthday,publish_actions&response_type=token");
            } else {
                // The person is not logged into Facebook, so we're not sure if
                // they are logged into this app or not.
                window.location = encodeURI("https://www.facebook.com/dialog/oauth?client_id=772954419408981&redirect_uri=" + uri + "&scope=email,user_birthday,publish_actions&response_type=token");
            }
        }

        function checkLoginState() {
            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        }

        window.fbAsyncInit = function () {
            FB.init({
                appId: '772954419408981',
                cookie: true,
                xfbml: true,
                version: 'v1.1'
            });

            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        };

        // Load the SDK asyn
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
</body>
</html>